import { github, nightOwl, oceanicNext, vsDark } from '@code-surfer/themes';
import { CodeSurfer, CodeSurferColumns, Step } from 'code-surfer';
import { Appear, themes } from 'mdx-deck';

import ComparisonColumn from './components/ComparisonColumn';
import { COLUMN_THEMES } from './components/constants';
import { getTheme } from './components/helper';
import Head from './components/Head';
import ImageStack from './components/ImageStack';
import ngStructure from './images/ng-structure.png';
import ngStyleGuide from './images/ng-style-guide.png';
import reactStyleGuide from './images/react-style-guide-1.png';
import reactStyleGuide2 from './images/react-style-guide-2.png';

import BasicDogsList from './samples/react/List/BasicDogsList';

import './styles/overrides.css';
import './styles/styles.css';

export const theme = themes.notes;

<Head title="Angular for React Devs and Vice Versa" />

<!-- Slides Start -->

# Angular for React Devs and Vice Versa

UI Meetup

By Phani Rahul Sivalenka

<div class="row">
  <a class="row-item" href="/1">
    Part 1: Basics
  </a>
  <a class="row-item" href="/20">
    Part 2: Advanced
  </a>
</div>

---

# Part 1: BASICS

#### 30th Nov 2020

---

# BASICS

## How to define a component?

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step>

```jsx 4:11 subtitle="define it as a function" file=./samples/react/MyComp.js

```

```ts 3:15 subtitle="define it as a class decorated with '@Component()' decorator" file=./samples/ng/inner-comp/inner-comp.component.ts

```

</Step>

<Step>

```diff 5:9 subtitle="template lives inside the component definition and cannot be externalized"

```

```diff 5 subtitle="template can be an external html file (preferred)"

```

</Step>

<Step>

```diff 5:9 subtitle="template lives inside the component definition and cannot be externalized"

```

```file 5:10 subtitle="template can be in the same file"  file=./samples/ng/my-inline-comp/my-inline-comp.component.ts

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Syntax">

<ComparisonColumn>

- Language : JavaScript / [TypeScript](https://www.typescriptlang.org/)
- Template Syntax : [JSX](https://reactjs.org/docs/introducing-jsx.html)

</ComparisonColumn>

<ComparisonColumn fw="ng">

- Language : [TypeScript](https://www.typescriptlang.org/)
- Template Syntax : [Extended HTML](https://angular.io/guide/template-syntax)

</ComparisonColumn>

</Step>

</CodeSurferColumns>

---

# BASICS

## How to use the component defined?

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Usage">

```jsx 4[7:13] subtitle="use the component name as element. (should be in PascalCase)" file=./samples/react/MyComp.js

```

```ts 4[14:21] subtitle="use the selector as element" file=./samples/ng/inner-comp/inner-comp.component.ts

```

</Step>

<Step title="Usage">

```jsx subtitle="use the component name as element. (should be in PascalCase)"
<MyComp />;
{
  /* or */
}
<MyComp></MyComp>;
```

```html subtitle="use the selector as element (close tag cannot be self closing)"
<my-comp></my-comp>
```

</Step>

</CodeSurferColumns>

---

# BASICS

## How to style?

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Styling">

```jsx 2 subtitle="import an external CSS file (styles leak here)" file=./samples/react/MyComp.js

```

```ts 6 subtitle="link to an external CSS file (by default non-leaking)" file=./samples/ng/inner-comp/inner-comp.component.ts

```

</Step>

<Step title="Styling">

```jsx 2 subtitle="import an external CSS file (styles leak here)" file=./samples/react/MyComp.js

```

```ts 1[29:46],7 subtitle="to make Angular leak styles, we can set view encapsulation to 'None'" file=./samples/ng/inner-comp-leaking/inner-comp.component.ts

```

</Step>

<Step title="Styling: In the same file">

```jsx 6:8 subtitle="define inline using CSS-in-JS" file=./samples/react/MyCompInline.js

```

```ts 8[10:30],11:17 subtitle="define in the same file or inline" file=./samples/ng/my-inline-comp/my-inline-comp.component.ts

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Styling: More Options">

<ComparisonColumn>

- [CSS Modules (available in Create React App (CRA) by default)](https://create-react-app.dev/docs/adding-a-css-modules-stylesheet/)
- [Styled Components](https://styled-components.com/)
- [Material UI Styling](https://material-ui.com/styles/basics/)
- Can also be setup to use any kind of CSS pre-processor

</ComparisonColumn>

<ComparisonColumn fw="ng">

- [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS)
- [SCSS/SASS](https://sass-lang.com/)
- [Less](http://lesscss.org/)
- [Stylus](https://stylus-lang.com/)

</ComparisonColumn>

</Step>

</CodeSurferColumns>

---

# BASICS

## How to communicate between components?

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Inputs">

```jsx 3[16:21],4[11:15] subtitle="use 'props' for inputs" file=./samples/react/MyCompWithoutPropsDestructuring.js

```

```ts 32 subtitle="use '@Input()' decorator for inputs" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Inputs">

```diff 4 subtitle="note that 'props' here is an object from which we are extracting our inputs"

```

```ts 32 subtitle="use '@Input()' decorator for inputs" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Inputs">

```jsx 3[19:23] subtitle="can also be direclty destructured" file=./samples/react/MyComp/MyComp.js

```

```ts 32 subtitle="use '@Input()' decorator for inputs" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Inputs">

```jsx 3:4,8[42:46] subtitle="in TypeScript prop types are defined as interfaces separately" file=./samples/react/MyComp/MyComp.tsx

```

```ts 32 subtitle="use '@Input()' decorator for inputs" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Inputs">

```diff 8[15:36] subtitle="and use that type in the component"

```

```ts 32 subtitle="use '@Input()' decorator for inputs" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Inputs: Binding">

```jsx 43[14:20] subtitle="bind in JSX using curly braces ({...})" file=./samples/react/MyComp/MyComp.js

```

```ts 2[27:35] subtitle="bind in the html using double curly braces ({{...}})" file=./samples/ng/my-comp/my-comp.component.html

```

</Step>

<Step title="Inputs: Usage">

```jsx 1[9:24] subtitle="'Batman' string value is assigned to 'name' prop using curly braces ({})"
<MyComp name={'Batman'} />
```

```html 2[10:27] subtitle="'Batman' string value is assigned to 'name' input using property binding (square brackets; [])."
<!-- Property binding -->
<my-comp [name]="'Batman'"></my-comp>
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Outputs">

```jsx 3[25:37] subtitle="use 'prop functions' for outputs" file=./samples/react/MyComp/MyComp.js

```

```ts 34 subtitle="use '@Output()' decorator for outputs" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Outputs: Raising the event">

```jsx 30 subtitle="call it as any other JS function call" file=./samples/react/MyComp/MyComp.js

```

```ts 73 subtitle="use 'emit' method on EventEmitter to raise the event" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Outputs: Usage">

```jsx 3
<MyComp
  name={'Batman'}
  onNameChange={e => console.log('name has changed', e)}
/>
```

```html 2[28:67]
<!-- Event Binding -->
<my-comp [name]="'Batman'" (nameChange)="handleNameChange($event)"
  ><my-comp></my-comp
></my-comp>
```

</Step>

</CodeSurferColumns>

---

# BASICS

## How do we maintain state?

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Component State">

```jsx 4 subtitle="define it using a special 'useState' hook which gives the current value of state (count) and a setter function (setCount)" file=./samples/react/MyComp/MyComp.js

```

```ts 36 subtitle="define it as plain member of the class" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

<Step title="Component State: Changing the state">

```jsx 34:38 subtitle="call the setter function that is destructured out of useState call" file=./samples/react/MyComp/MyComp.js

```

```ts 77 subtitle="use simple assignment" file=./samples/ng/my-comp/my-comp.component.ts

```

</Step>

</CodeSurferColumns>

---

### What if our components do not have a 'parent-child' relationship?

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Communication Between Unrelated Components">

<ComparisonColumn>

## React Context

</ComparisonColumn>

<ComparisonColumn fw="ng">

## Angular Services

</ComparisonColumn>

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Communication Between Unrelated Components">

```jsx subtitle="define the context" file=./samples/react/CartProvider.js

```

```ts subtitle="define the service" file=./samples/ng/cart.service.ts

```

</Step>

<Step title="Communication Between Unrelated Components">

```diff subtitle="there are three parts to a context definition"

```

```ts subtitle="define the service" file=./samples/ng/cart.service.ts

```

</Step>

<Step title="Communication Between Unrelated Components">

```diff 3 subtitle="1. create the context"

```

```ts subtitle="define the service" file=./samples/ng/cart.service.ts

```

</Step>

<Step title="Communication Between Unrelated Components">

```diff 5:15 subtitle="2. create the corresponding provider"

```

```ts subtitle="define the service" file=./samples/ng/cart.service.ts

```

</Step>

<Step title="Communication Between Unrelated Components">

```diff 17 subtitle="3. expose a custom hook to be used to access the values in the context"

```

```ts subtitle="define the service" file=./samples/ng/cart.service.ts

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Usage: Provide It">

```jsx 6:8 subtitle="provide the context in the root or in any other component" file=./samples/react/UsingContext.js

```

```ts 10 subtitle="provide the service in root module or any sub modules or in a component (@Component() decorator's 'providers' property)" file=./samples/ng/using-service.module.ts

```

</Step>

<Step title="Usage: Inject It">

```diff 13 subtitle="access context using the custom hook exposed"

```

```ts 14 subtitle="inject the service in the constructor wherever needed" file=./samples/ng/app.component.ts

```

</Step>

<Step title="Usage: Use It">

```diff 15 subtitle="use the members in context"

```

```diff 8 subtitle="use the members in service"

```

</Step>

</CodeSurferColumns>

---

<div style={{ padding: '15%', width: '100%' }}>

|        Next Up        |
| :-------------------: | :-----------: |
| Component Composition |     Form      |
|    Lifecycle Hooks    | HTTP Requests |
|        Modules        |   Ecosystem   |
|        Routing        |
|     Lazy Loading      |

</div>

---

# Part 2: ADVANCED

#### 7th Dec 2020

---

# ADVANCED

## Component Composition

---

<CodeSurferColumns>

<Step>

<BasicDogsList />

</Step>

<Step subtitle="How do we build this?">

<BasicDogsList />

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step subtitle="One way is to define all in one component">

```jsx file=./samples/react/List/BasicDogsList.js

```

```html file=./samples/ng/list/basic-dogs-list.component.html

```

</Step>

<Step subtitle="Notice the repetitions">

```diff 7:15

```

```diff 2:8

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Extract dogs into an array">

```jsx 5:18 subtitle="define dogs constant in the component function" file=./samples/react/List/BasicDogsListUsingFor.js

```

```ts 9:22 subtitle="define dogs property on the component class" file=./samples/ng/list/basic-dogs-list-using-for.component.ts

```

</Step>

<Step title="Simplify the code using loop">

```jsx 22:34 subtitle="Using Array.prototype.map() function" file=./samples/react/List/BasicDogsListUsingFor.js

```

```html 2:8 subtitle="Using ngFor structural directive" file=./samples/ng/list/basic-dogs-list-using-for.component.html

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Don't miss the key in React">

```jsx 24[41:55] subtitle="notice the key prop"  file=./samples/react/List/BasicDogsListUsingFor.js

```

```html 2:8 subtitle="No key needed here" file=./samples/ng/list/basic-dogs-list-using-for.component.html

```

</Step>

<Step title="Don't miss the key in React">

```jsx 24[41:55] subtitle="Keys help React identify which items have changed, are added, or are removed. Keys should be given to the elements inside the array to give the elements a stable identity. Refer: https://reactjs.org/docs/lists-and-keys.html"  file=./samples/react/List/BasicDogsListUsingFor.js

```

```html 2:8 subtitle="No key needed here" file=./samples/ng/list/basic-dogs-list-using-for.component.html

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step title="Can do in Angular too">

```jsx 24[41:55] file=./samples/react/List/BasicDogsListUsingFor.js

```

```ts 24:26 subtitle="to minimize churn in the DOM, we can define a trackBy function to achieve the same" file=./samples/ng/list/basic-dogs-list-using-for-trackby.component.ts

```

</Step>

<Step title="Can do in Angular too">

```jsx 24[41:55] file=./samples/react/List/BasicDogsListUsingFor.js

```

```ts 2[44:68] subtitle="use trackBy in template" file=./samples/ng/list/basic-dogs-list-using-for-trackby.component.html

```

</Step>

</CodeSurferColumns>
